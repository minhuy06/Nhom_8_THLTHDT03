
import java.util.Arrays;
import java.util.List;

public class Textbook extends Book {
    private String monHoc;
    private String capDo;
    
    private static final List<String> CAP_DO_HOP_LE = Arrays.asList("TIỂU HỌC", "TRUNG HỌC", "CAO ĐẲNG", "ĐẠI HỌC"); 

    public Textbook(String maSach, String tieuDe, String tacGia, double giaCoBan, 
                         int soLuongTonKho, String viTriKho, TinhTrang tinhTrang, 
                         int namXuatBan, String monHoc, String capDo) {
        super(maSach, tieuDe, tacGia, giaCoBan, soLuongTonKho, viTriKho, tinhTrang, namXuatBan);
        this.monHoc = monHoc;
        
        // Ràng buộc 5: Kiểm tra Cấp độ bằng logic kiểm tra
        this.capDo = kiemTraCapDo(capDo);
    }
    
    private String kiemTraCapDo(String capDoDauVao) {
        String capDoUpper = capDoDauVao.toUpperCase();
        if (CAP_DO_HOP_LE.contains(capDoUpper)) {
            return capDoDauVao;
        } else {
            System.err.println("Cảnh báo: Cấp độ \"" + capDoDauVao + "\" không hợp lệ. Đã đặt thành CẤP ĐỘ KHÁC.");
            return "CẤP ĐỘ KHÁC"; 
        }
    }

    @Override
    public double tinhGiaBan() {
        final int NAM_HIEN_TAI = 2025; // Giả định
        final double GIA_PHU_THU_MOI_NAM = 5000.0;
        int soNamDaXuatBan = NAM_HIEN_TAI - super.getNamXuatBan();
        
        return super.giaCoBan + (Math.max(0, soNamDaXuatBan) * GIA_PHU_THU_MOI_NAM);
    }
}