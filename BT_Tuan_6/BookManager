import java.util.ArrayList;
import java.util.List;
import java.util.Iterator;

public class QuanLySach {
    private List<Sach> danhSachSach; 
    public QuanLySach() {
        this.danhSachSach = new ArrayList<>();
    }

    public void themSach(Sach sach) {
        danhSachSach.add(sach);
        System.out.println("✅ Đã thêm sách: " + sach.tenSach);
    }

    public void hienThiDanhSachSach() {
        if (danhSachSach.isEmpty()) {
            System.out.println("Danh sách sách hiện đang trống.");
            return;
        }
        System.out.println("\n--- DANH SÁCH SÁCH HIỆN CÓ ---");
        for (Sach sach : danhSachSach) {
    
            System.out.println(sach.toString()); 
        }
        System.out.println("--------------------------------");
    }
    public void timKiemTheoTen(String tenTimKiem) {
        System.out.println("\n--- KẾT QUẢ TÌM KIẾM cho '" + tenTimKiem + "' ---");
        boolean found = false;
        String tenTimKiemLower = tenTimKiem.toLowerCase();
        for (Sach sach : danhSachSach) {
            if (sach.tenSach.toLowerCase().contains(tenTimKiemLower)) {
                System.out.println(sach.toString());
                found = true;
            }
        }
        if (!found) {
            System.out.println("Không tìm thấy sách nào với tên đã nhập.");
        }
    }

    public void xoaSach(String maSach) {
        Iterator<Sach> iterator = danhSachSach.iterator();
        boolean removed = false;
        while (iterator.hasNext()) {
            Sach sach = iterator.next();
            if (sach.maSach.equals(maSach)) { 
                iterator.remove();
                System.out.println("✅ Đã xóa sách có mã: " + maSach + " (" + sach.tenSach + ")");
                removed = true;
                break; 
            }
        }
        if (!removed) {
            System.out.println("❌ Không tìm thấy sách có mã: " + maSach + " để xóa.");
        }
    }

    public void capNhatGiaBan(String maSach, double giaMoi) {
        boolean updated = false;
        for (Sach sach : danhSachSach) {
            if (sach.maSach.equals(maSach)) {
                double giaCu = sach.giaBan;
                sach.giaBan = giaMoi; 
                System.out.println("✅ Đã cập nhật giá sách: " + sach.tenSach + 
                                   " từ $" + giaCu + " lên $" + giaMoi);
                updated = true;
                break;
            }
        }
        if (!updated) {
            System.out.println("❌ Không tìm thấy sách có mã: " + maSach + " để cập nhật.");
        }
    }
}